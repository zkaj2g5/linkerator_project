{"ast":null,"code":"import _toConsumableArray from\"/Users/joannemiciano/Desktop/course_work/linkerator_project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/Users/joannemiciano/Desktop/course_work/linkerator_project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import CreateLinks from'./CreateLinks';import{Card,Input}from'semantic-ui-react';import{getLinks,addClick,deleteLink}from'../api';var Home=function Home(props){console.log(props);var _useState=useState(),_useState2=_slicedToArray(_useState,2),links=_useState2[0],setLinks=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),copyLinks=_useState4[0],setCopyLinks=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),search=_useState6[0],setSearch=_useState6[1];var handleChanges=function handleChanges(event){console.log(event.target.value);setSearch(event.target.value);console.log(search);searchLinks(event.target.value);};console.log(search);useEffect(function(){getLinks().then(function(response){console.log(response.allLinks);setLinks(response.allLinks);setCopyLinks(response.allLinks);}).catch(function(error){console.log(error.response.data);console.log(error.response.status);console.log(error.response.headers);});},[]);var searchLinks=function searchLinks(searchTerm){console.log('search term',searchTerm);var filteredLinks=copyLinks.filter(function(link){return link.url.toLowerCase().includes(searchTerm.toLowerCase())||link.tags[0].name.toLowerCase().includes(searchTerm.toLowerCase());});setLinks(filteredLinks);console.log('filtered links',filteredLinks);};var searchTag=function searchTag(searchTerm){setSearch(searchTerm);console.log('search term2',searchTerm);var filteredLinks=copyLinks.filter(function(link){return link.tags[0].name.toLowerCase().includes(searchTerm.toLowerCase());});setLinks(filteredLinks);console.log('filtered links2',filteredLinks);};var filterPopular=function filterPopular(){var filteredLinks=copyLinks.sort(function(a,b){return b.clickCount-a.clickCount;});setLinks(_toConsumableArray(filteredLinks));};var addCount=function addCount(id){console.log(id);addClick(id).then(function(response){console.log(response);window.location.reload(false);}).catch(function(error){console.log(error.response.data);console.log(error.response.status);console.log(error.response.headers);});};var removeLink=function removeLink(id){deleteLink(id);window.location.reload(false);};console.log('links',links);return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"home-top\"},/*#__PURE__*/React.createElement(\"h1\",null,\"Favorites Keeper\")),/*#__PURE__*/React.createElement(CreateLinks,null),/*#__PURE__*/React.createElement(\"div\",{className:\"flexbox-search\"},/*#__PURE__*/React.createElement(\"div\",{className:\"search-bar\"},/*#__PURE__*/React.createElement(Input,{placeholder:\"Search\",value:search,onChange:handleChanges})),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"button\",{className:\"most-popular\",onClick:filterPopular},\"Most Popular\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"home\"},/*#__PURE__*/React.createElement(\"div\",{className:\"flexbox-column\"},/*#__PURE__*/React.createElement(\"div\",{className:\"link-listings\"},links?links.map(function(link){var date=new Date(link.dateShared);return/*#__PURE__*/React.createElement(\"div\",{key:link.id,className:\"link-card\"},/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(Card.Content,{style:{border:'none'}},/*#__PURE__*/React.createElement(Card.Header,{className:\"trash-can\"},/*#__PURE__*/React.createElement(\"a\",{href:!link.url.indexOf('http')?\"\".concat(link.url):\"https://\".concat(link.url),target:\"_blank\",rel:\"noopener noreferrer\",onClick:function onClick(){return addCount(link.id);}},link.url),/*#__PURE__*/React.createElement(\"i\",{className:\"trash icon\",onClick:function onClick(){return removeLink(link.id);}})),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"b\",null,\"Date:\"),\"\\xA0\",date.toDateString()),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"b\",null,\"Views:\"),\" \\xA0\",link.clickCount),/*#__PURE__*/React.createElement(\"div\",{className:\"flexbox-wrap\"},/*#__PURE__*/React.createElement(\"b\",null,\"Tags:\"),\" \\xA0\",link.tags.map(function(tag){return tag.name.split(',').map(function(name){console.log('tagname',name);return/*#__PURE__*/React.createElement(\"span\",{className:\"tag\",onClick:function onClick(){return searchTag(name);}},name);});}))),/*#__PURE__*/React.createElement(Card.Description,null,/*#__PURE__*/React.createElement(\"b\",null,\"Comment:\"),\" \",link.comment)));}):null))));};export default Home;","map":{"version":3,"sources":["/Users/joannemiciano/Desktop/course_work/linkerator_project/src/components/Home.js"],"names":["React","useState","useEffect","CreateLinks","Card","Input","getLinks","addClick","deleteLink","Home","props","console","log","links","setLinks","copyLinks","setCopyLinks","search","setSearch","handleChanges","event","target","value","searchLinks","then","response","allLinks","catch","error","data","status","headers","searchTerm","filteredLinks","filter","link","url","toLowerCase","includes","tags","name","searchTag","filterPopular","sort","a","b","clickCount","addCount","id","window","location","reload","removeLink","map","date","Date","dateShared","border","indexOf","toDateString","tag","split","comment"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport CreateLinks from './CreateLinks';\nimport { Card, Input } from 'semantic-ui-react';\nimport { getLinks, addClick, deleteLink } from '../api';\n\nconst Home = (props) => {\n  console.log(props);\n  const [links, setLinks] = useState();\n  const [copyLinks, setCopyLinks] = useState();\n  const [search, setSearch] = useState('');\n\n  const handleChanges = (event) => {\n    console.log(event.target.value);\n    setSearch(event.target.value);\n    console.log(search);\n    searchLinks(event.target.value);\n  };\n  console.log(search);\n\n  useEffect(() => {\n    getLinks()\n      .then((response) => {\n        console.log(response.allLinks);\n        setLinks(response.allLinks);\n        setCopyLinks(response.allLinks);\n      })\n      .catch((error) => {\n        console.log(error.response.data);\n        console.log(error.response.status);\n        console.log(error.response.headers);\n      });\n  }, []);\n\n  const searchLinks = (searchTerm) => {\n    console.log('search term', searchTerm);\n    const filteredLinks = copyLinks.filter((link) => {\n      return (\n        link.url.toLowerCase().includes(searchTerm.toLowerCase()) ||\n        link.tags[0].name.toLowerCase().includes(searchTerm.toLowerCase())\n      );\n    });\n    setLinks(filteredLinks);\n    console.log('filtered links', filteredLinks);\n  };\n\n  const searchTag = (searchTerm) => {\n    setSearch(searchTerm);\n    console.log('search term2', searchTerm);\n    const filteredLinks = copyLinks.filter((link) => {\n      return link.tags[0].name.toLowerCase().includes(searchTerm.toLowerCase());\n    });\n    setLinks(filteredLinks);\n    console.log('filtered links2', filteredLinks);\n  };\n\n  const filterPopular = () => {\n    const filteredLinks = copyLinks.sort((a, b) => {\n      return b.clickCount - a.clickCount;\n    });\n    setLinks([...filteredLinks]);\n  };\n\n  const addCount = (id) => {\n    console.log(id);\n    addClick(id)\n      .then((response) => {\n        console.log(response);\n        window.location.reload(false);\n      })\n      .catch((error) => {\n        console.log(error.response.data);\n        console.log(error.response.status);\n        console.log(error.response.headers);\n      });\n  };\n\n  const removeLink = (id) => {\n    deleteLink(id);\n    window.location.reload(false);\n  };\n\n  console.log('links', links);\n\n  return (\n    <>\n      <div className='home-top'>\n        <h1>Favorites Keeper</h1>\n      </div>\n\n      <CreateLinks />\n      <div className='flexbox-search'>\n        <div className='search-bar'>\n          <Input placeholder='Search' value={search} onChange={handleChanges} />\n        </div>\n        <div>\n          <button className='most-popular' onClick={filterPopular}>\n            Most Popular\n          </button>\n        </div>\n      </div>\n      <div className='home'>\n        <div className='flexbox-column'>\n          <div className='link-listings'>\n            {links\n              ? links.map((link) => {\n                  const date = new Date(link.dateShared);\n                  return (\n                    <div key={link.id} className='link-card'>\n                      <Card>\n                        <Card.Content style={{ border: 'none' }}>\n                          <Card.Header className='trash-can'>\n                            <a\n                              href={\n                                !link.url.indexOf('http')\n                                  ? `${link.url}`\n                                  : `https://${link.url}`\n                              }\n                              target='_blank'\n                              rel='noopener noreferrer'\n                              onClick={() => addCount(link.id)}\n                            >\n                              {link.url}\n                            </a>\n                            <i\n                              className='trash icon'\n                              onClick={() => removeLink(link.id)}\n                            ></i>\n                          </Card.Header>\n                          <div>\n                            <b>Date:</b>&nbsp;\n                            {date.toDateString()}\n                          </div>\n                          <div>\n                            <b>Views:</b> &nbsp;\n                            {link.clickCount}\n                          </div>\n                          <div className='flexbox-wrap'>\n                            <b>Tags:</b> &nbsp;\n                            {link.tags.map((tag) => {\n                              return tag.name.split(',').map((name) => {\n                                console.log('tagname', name);\n                                return (\n                                  <span\n                                    className='tag'\n                                    onClick={() => searchTag(name)}\n                                  >\n                                    {name}\n                                  </span>\n                                );\n                              });\n                            })}\n                          </div>\n                        </Card.Content>\n                        <Card.Description>\n                          <b>Comment:</b> {link.comment}\n                        </Card.Description>\n                      </Card>\n                    </div>\n                  );\n                })\n              : null}\n          </div>\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default Home;\n"]},"metadata":{},"sourceType":"module"}